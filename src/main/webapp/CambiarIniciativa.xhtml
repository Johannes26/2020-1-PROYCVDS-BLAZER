<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

  <h:head>
    <style>
      div.iniciarSesion {
        width:600px;
        margin: auto;
      }


    </style>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css" />
  </h:head>
  <body background="fondo.jpg">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <a class="navbar-brand" href="#">BlazerApp</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item">
            <a class="nav-link" href="#">Inicio <span class="sr-only">(current)</span></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Pagina escuela</a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Opciones
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              <a class="dropdown-item" href="#">Opcion1</a>
              <a class="dropdown-item" href="#">Opcion2</a>
              <div class="dropdown-divider"></div>
              <a class="dropdown-item" href="#">Salir</a>
            </div>
          </li>
        </ul>
        <form class="form-inline my-2 my-lg-0">
          <p:outputLabel class="navbar-brand" value="#{principalBean.getNombre()}"></p:outputLabel>
        </form>
      </div>
    </nav>
    <h:form class="text-center">
      <h1 class="font-italic" style="color: white;">Iniciativas</h1>
        <table id="usersTable" class="table table-striped table-dark">
          <thead>
            <tr>
              <th>Id</th>
              <th>Descripcion</th>
              <th>Fecha Registro</th>
              <th>Estado</th>
            </tr>
          </thead>
          <tbody>
            <ui:repeat var="ini" value="#{adminiBean.consultarIniciativas()}">
            <tr>
              <td>#{ini.num}</td>
              <td>#{ini.descripcion}</td>
              <td>#{ini.fechaRegistro}</td>
              <td>#{ini.estado}</td>
            </tr>
            </ui:repeat>
          </tbody>
        </table>




    <p:panel class="text-center" id="panelEstado" header="Actualizar Estado" style="background-color: #464646;">
              <h:outputLabel style="color:#FFFFFF" placeholder="Numero" value="Id Iniciativa:"/>
              <p:inputText required="true" type="int" binding="#{num}" />
              <p:messages>
                  <p:autoUpdate />
              </p:messages>
              <h:panelGrid rendered="#{adminiBean.iniciativabuscada!=null}" columns="2" style="margin-top:2%" cellpadding="5">
                  <p:outputLabel style="color:#2A1313" for="@next" value="Estado a asignar:"  />
                  <p:selectOneMenu id="estados" value="#{adminiBean.estadoNuevo}" style="width:125px">
                      <f:selectItem itemLabel="" itemValue="" />
                      <f:selectItem itemLabel="En espera de revisi贸n" itemValue="En espera de revisi贸n" />
                      <f:selectItem itemLabel="En revisi贸n" itemValue="En revisi贸n" />
                      <f:selectItem itemLabel="Proyecto" itemValue="Proyecto" />
                      <f:selectItem itemLabel="Solucionado" itemValue="Solucionado" />
                  </p:selectOneMenu>
              </h:panelGrid>
              <p:commandButton value="Cambiar" rendered="#{adminiBean.iniciativabuscada!=null}" actionListener="#{adminiBean.cambiarEstadoIniciativa(num.value,adminiBean.estadoNuevo)}" />
    </p:panel>
    <p:commandButton value="Buscar" update="panelEstado" actionListener="#{adminiBean.consultarIniciativa(num.value)}" />

</h:form>

  </body>
</html>
